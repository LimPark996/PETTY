<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- 🧠 외부 스크립트 (순서 중요) -->
    <script
      defer
      src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=865dae18d063c5a6964dc558dec6e8a1&libraries=services"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"
    ></script>

    <!-- 🧠 앱 로직 (모듈 사용 시 type="module") -->
    <script type="module" src="/PETTY/js/app.js" defer></script>
    <script type="module" src="/PETTY/js/main.js" defer></script>
    <script type="module" src="/PETTY/js/reco.js" defer></script>
    <script type="module" src="/PETTY/js/post.js" defer></script>
    <script type="module" src="/PETTY/js/script.js" defer></script>

    <!-- Bootstrap JS -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    ></script>

    <!-- ✅ Favicon -->
    <link rel="icon" href="/PETTY/asset/favicon/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/PETTY/asset/favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="/PETTY/asset/favicon/site.webmanifest" />

    <!-- ✅ OG 메타태그 -->
    <meta
      property="og:title"
      content="PETTY - 반려동물과 함께 떠나는 완벽한 여행"
    />
    <meta
      property="og:description"
      content="우리 아이와 여행을 떠나고 싶다면? PETTY가 도와줄게요! 🐾"
    />
    <meta
      property="og:image"
      content="https://github.com/user-attachments/assets/42edc0f5-5e02-4709-97c5-3009ed6cdeb2"
    />

    <!-- ✅ CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/PETTY/css/common.css" />
    <link rel="stylesheet" href="/PETTY/css/reco.css" />

    <title>PETTY | 반려동물 맞춤 여행 추천</title>
  </head>

  <body>
    <!-- ✅ 네비게이션 -->
    <div id="navbar"></div>

    <!-- ✅ 상단 배너 -->
    <section class="container mt-4">
      <img src="/PETTY/asset/008.png" class="img-fluid" alt="배너 이미지" />
    </section>

    <!-- ✅ 사용자 입력 폼 -->
    <section class="container mt-4 sect-body" id="sect-bd">
      <div class="form-wrapper">
        <h2 class="mb-4">반려동물 정보 입력</h2>

        <form id="petForm">
          <div class="input-group">
            <div class="mb-3 w-100">
              <label class="form-label">이름</label>
              <input type="text" class="form-control" id="petName" required />
            </div>
            <div class="mb-3 w-100">
              <label class="form-label">종</label>
              <input
                type="text"
                class="form-control"
                id="petSpecies"
                required
              />
            </div>
          </div>

          <!-- 드롭다운: 크기 -->
          <div class="mb-3">
            <label class="form-label">동물 크기</label>
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle w-100"
                type="button"
                id="petSizeBtn"
                data-bs-toggle="dropdown"
              >
                선택
              </button>
              <ul class="dropdown-menu w-100" id="petSizeMenu">
                <li>
                  <label
                    ><input type="radio" name="petSize" value="4kg 이하" /> 4kg
                    이하</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="petSize" value="4~8kg 이하" />
                    4~8kg 이하</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="petSize" value="8~12kg 이하" />
                    8~12kg 이하</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="petSize" value="12~20kg 이하" />
                    12~20kg 이하</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="petSize" value="20kg 이상" />
                    20kg 이상</label
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- 드롭다운: 맹수 여부 -->
          <div class="mb-3">
            <label class="form-label">맹수 여부</label>
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle w-100"
                type="button"
                id="isPredatorBtn"
                data-bs-toggle="dropdown"
              >
                선택
              </button>
              <ul class="dropdown-menu w-100" id="isPredatorMenu">
                <li>
                  <label
                    ><input type="radio" name="isPredator" value="예" />
                    예</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="isPredator" value="아니오" />
                    아니오</label
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- 드롭다운: 공공장소 동행 -->
          <div class="mb-3">
            <label class="form-label">공공장소 동행 가능 여부</label>
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle w-100"
                type="button"
                id="publicAccessBtn"
                data-bs-toggle="dropdown"
              >
                선택
              </button>
              <ul class="dropdown-menu w-100" id="publicAccessMenu">
                <li>
                  <label
                    ><input type="radio" name="publicAccess" value="가능" />
                    가능</label
                  >
                </li>
                <li>
                  <label
                    ><input
                      type="radio"
                      name="publicAccess"
                      value="입마개 후 가능"
                    />
                    입마개 후 가능</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="publicAccess" value="불가능" />
                    불가능</label
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- 드롭다운: 관광 타입 -->
          <div class="mb-3">
            <label class="form-label">숙소 / 관광 타입</label>
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle w-100"
                type="button"
                id="tourTypeBtn"
                data-bs-toggle="dropdown"
              >
                선택
              </button>
              <ul class="dropdown-menu w-100" id="tourTypeMenu">
                <li>
                  <label
                    ><input type="radio" name="tourType" value="12" />
                    관광지</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="14" />
                    문화시설</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="15" />
                    축제공연행사</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="25" />
                    여행코스</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="28" />
                    레포츠</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="32" />
                    숙박</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="38" />
                    쇼핑</label
                  >
                </li>
                <li>
                  <label
                    ><input type="radio" name="tourType" value="39" />
                    음식점</label
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- 위치 선택 -->
          <div class="mb-3">
            <label class="form-label">위치</label>
            <div class="d-flex">
              <input
                type="text"
                class="form-control me-2"
                id="locationInput"
                placeholder="위치 정보"
                readonly
              />
              <button
                type="button"
                class="btn btn-secondary text-nowrap"
                data-bs-toggle="modal"
                data-bs-target="#mapModal"
              >
                위치 선택
              </button>
            </div>
          </div>

          <button
            type="submit"
            class="btn btn-primary mt-3 w-100"
            id="fetchButton"
          >
            정보 찾기
          </button>
        </form>
      </div>
    </section>

    <!-- ✅ 위치 모달 (카카오 지도) -->
    <div
      class="modal fade"
      id="mapModal"
      tabindex="-1"
      aria-labelledby="mapModalLabel"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="mapModalLabel">위치 선택</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="d-flex mb-2">
              <input
                type="text"
                class="form-control me-2"
                id="keywordInput"
                placeholder="위치 검색어 입력"
              />
              <button type="button" class="btn btn-secondary" id="searchButton">
                검색
              </button>
            </div>
            <div id="map" class="map-container"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="confirmLocation">
              선택 완료
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ✅ 추천 결과 / 로딩 스피너 -->
    <div class="resultbox">
      <div id="spinner"></div>
      <div id="result"></div>
    </div>

    <!-- ✅ 푸터 -->
    <div id="footer"></div>
  </body>
</html>
